/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const P=require("react"),U=require("prop-types"),W=require("../../components/BaseView.js"),V=require("../common/VerticalResourceIterator.js"),c=require("../../messages/index.js"),q=require("../../constants/index.js"),s=require("@progress/kendo-date-math"),y=require("@progress/kendo-react-common"),M=require("@progress/kendo-react-intl"),$=require("../../services/rangeService.js"),j=require("../../services/occurrenceService.js"),Y=require("../../services/itemsService.js"),R=require("../../utils/index.js"),F=require("../../tasks/SchedulerEditTask.js"),K=require("../../slots/SchedulerEditSlot.js"),D=require("../../context/SchedulerContext.js"),z=require("../../context/SchedulerResourceIteratorContext.js"),w=require("@progress/kendo-svg-icons"),G=require("../../services/slotsService.js"),p=require("../../hooks/useCellSync.js");function Z(t){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const a in t)if(a!=="default"){const n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:()=>t[a]})}}return r.default=t,Object.freeze(r)}const e=Z(P),_=t=>{const{group:r,timezone:a,resources:n}=D.useSchedulerPropsContext(),T=t.editTask||F.SchedulerEditTask,f=t.editSlot||K.SchedulerEditSlot,m=e.useRef(null),i=y.useDir(m),u=M.useInternationalization(),d=M.useLocalization(),[v]=D.useSchedulerDataContext(),N=D.useSchedulerGroupsContext(),A=D.useSchedulerFieldsContext(),l=D.useSchedulerDateRangeContext(),g=e.useMemo(()=>$.toRanges(l,{step:s.MS_PER_DAY,timezone:a}),[l.start.getTime(),l.end.getTime(),a]),h=e.useMemo(()=>G.toSlots(l,{step:s.MS_PER_DAY},{groups:N,ranges:g}),[l.start.getTime(),l.end.getTime(),a,N,g]),I=e.useMemo(()=>j.toOccurrences(v,{dateRange:l,fields:A,timezone:a}),[v,l.start.getTime(),l.end.getTime(),A,a]),E=e.useMemo(()=>Y.toItems(I,{timezone:a},{groups:N,ranges:g}),[I,a,N,g]),L=e.useMemo(()=>y.classNames("k-scheduler-agendaview",t.className),[t.className]);return p.useCellSync({element:m,selector:".k-scheduler-datecolumn",explicitDepth:!1}),p.useCellSync({element:m,selector:".k-scheduler-timecolumn",explicitDepth:!1}),e.useMemo(()=>R.mapItemsToSlots(E,h,!0),[E,h]),e.useMemo(()=>R.mapSlotsToItems(E,h,!0),[E,h]),e.createElement(W.BaseView,{ref:m,id:t.id,style:t.style,className:L,props:t,slots:E,ranges:g},e.createElement("div",{className:"k-scheduler-head"},e.createElement(V.VerticalResourceIterator,{resources:n,group:r},e.createElement(z.SchedulerResourceIteratorContext.Consumer,null,({groupIndex:S})=>e.createElement("div",{className:"k-scheduler-row",key:S},e.createElement("div",{className:"k-scheduler-cell k-heading-cell k-group-cell k-scheduler-datecolumn"},d.toLanguageString(c.dateTitle,c.messages[c.dateTitle])),e.createElement("div",{className:"k-scheduler-cell k-heading-cell k-group-cell k-scheduler-timecolumn"},d.toLanguageString(c.timeTitle,c.messages[c.timeTitle])),e.createElement("div",{className:"k-scheduler-cell k-heading-cell k-scheduler-eventcolumn"},d.toLanguageString(c.eventTitle,c.messages[c.eventTitle])))))),e.createElement("div",{className:"k-scheduler-body"},e.createElement(V.VerticalResourceIterator,{resources:n,group:r,nested:!0},e.createElement(z.SchedulerResourceIteratorContext.Consumer,null,({groupIndex:S})=>h.filter(o=>o.group.index===(S||0)).map((o,C,O)=>e.createElement("div",{className:"k-scheduler-row  k-scheduler-content",key:`${S}:${C}`},e.createElement(f,{...o,editable:t.editable,row:O.length*(S||0)+C,col:0,slot:t.slot,viewSlot:t.viewSlot,className:"k-scheduler-datecolumn k-group-cell"},e.createElement("div",null,e.createElement("strong",{className:"k-scheduler-agendaday"},u.formatDate(o.zonedStart,"dd")),e.createElement("em",{className:"k-scheduler-agendaweek"},u.formatDate(o.zonedStart,"EEEE")),e.createElement("span",{className:"k-scheduler-agendadate"},u.formatDate(o.zonedStart,"y")))),e.createElement("div",{className:"k-scheduler-cell k-group-content"},o.items.length?o.items.map((k,b)=>e.createElement("div",{className:"k-scheduler-row",key:b},e.createElement("div",{className:"k-scheduler-cell k-scheduler-timecolumn"},e.createElement("div",null,k.tail&&e.createElement(y.IconWrap,{name:i==="rtl"?"caret-alt-right":"caret-alt-left",icon:i==="rtl"?w.caretAltRightIcon:w.caretAltLeftIcon}),k.isAllDay?d.toLanguageString(c.allDay,c.messages[c.allDay]):B(u,k),k.head&&e.createElement(y.IconWrap,{name:i==="rtl"?"caret-alt-left":"caret-alt-right",icon:i==="rtl"?w.caretAltLeftIcon:w.caretAltRightIcon}))),e.createElement("div",{className:"k-scheduler-cell"},e.createElement(T,{key:`${C}:${b}`,...k,onDataAction:t.onDataAction,task:t.task,viewTask:t.viewTask,editable:t.editable})))):e.createElement("div",{className:"k-scheduler-cell k-heading-cell k-group-cell"},d.toLanguageString(c.noEvents,c.messages[c.noEvents])))))))))},B=(t,r)=>{let a="{0:t}-{1:t}";return r.head?a="{0:t}":r.tail&&(a="{1:t}"),t.format(a,r.zonedStart,r.zonedEnd)},x=t=>s.getDate(t),H=(t,r)=>s.getDate(s.addDays(t,r||1)),J=({intl:t,date:r,numberOfDays:a=1,timezone:n})=>{const T=s.ZonedDate.fromLocalDate(r,n),f=a===q.DAYS_IN_WEEK_COUNT?x(s.firstDayInWeek(T,t.firstDay())):x(T),m=H(f,a),i=s.ZonedDate.fromUTCDate(R.toUTCDateTime(f),n),u=s.ZonedDate.fromUTCDate(R.toUTCDateTime(m),n),d=new Date(i.getTime()),v=new Date(u.getTime());return{start:d,end:v,zonedStart:i,zonedEnd:u}},Q={name:"agenda",title:t=>t.toLanguageString(c.agendaViewTitle,c.messages[c.agendaViewTitle]),dateRange:J,selectedDateFormat:"{0:D} - {1:D}",selectedShortDateFormat:"{0:d} - {1:d}",slotDuration:60*24,slotDivision:1,step:q.DAYS_IN_WEEK_COUNT,numberOfDays:q.DAYS_IN_WEEK_COUNT},X={title:U.any};_.propTypes=X;_.displayName="KendoReactSchedulerAgendaView";exports.AgendaView=_;exports.agendaViewDefaultProps=Q;
